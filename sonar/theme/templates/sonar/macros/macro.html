{# -*- coding: utf-8 -*-
  Swiss Open Access Repository
  Copyright (C) 2019 RERO

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, version 3 of the License.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
#}

{% macro dl(title, content) %}
<dt class="col-sm-2">
  {{ title }}:
</dt>
<dd class="col-sm-10">
  {{ content|safe }}
</dd>
{% endmacro %}

{% macro dl_dict(name, dict_or_string) %}
{% if dict_or_string %}
<dt class="col-sm-2">
  {{ name }}:
</dt>
<dd class="col-sm-10">
  {% if dict_or_string is string %}
  {{ dict_or_string }}
  {% else %}
  <ul class="list-unstyled rero-ils-person mb-0">
    {% for element in dict_or_string %}
    <li>{{ dict_or_string[element] }}</li>
    {% endfor %}
  </ul>
  {% endif %}
</dd>
{% endif %}
{% endmacro %}

{% macro dl_list(name, list_or_string) %}
{% if list_or_string %}
<dt class="col-sm-2">
  {{ name }}:
</dt>
<dd class="col-sm-10">
  {% if list_or_string is string %}
  {{ list_or_string }}
  {% else %}
  <ul class="list-unstyled rero-ils-person mb-0">
    {% for element in list_or_string %}
    <li>{{ element }}</li>
    {% endfor %}
  </ul>
  {% endif %}
</dd>
{% endif %}
{% endmacro %}

{% macro thumbnail(resource_type, pid, file, files, class = '') %}
{% set thumbnail = file | thumbnail(files) %}
{% if thumbnail %}
{% set file_title = file | file_title %}
<div class="text-center {{ class }}">
  <a href="/{{ resource_type }}/{{ pid }}/preview/{{ file.key }}" data-title="{{ file_title }}" class="previewLink">
    <img src="/{{ resource_type }}/{{ pid }}/files/{{ thumbnail.key }}" class="img-thumbnail img-fluid"
      alt="{{ file_title }}">
  </a>
  <p class="my-1 small">{{ file_title }}</p>
  <p class="m-0">
    <a href="/{{ resource_type }}/{{ pid }}/preview/{{ file.key }}" data-title="{{ file_title }}" class="previewLink"><i
        class="fa fa-eye mr-2"></i></a>
    <a href="/{{ resource_type }}/{{ pid }}/files/{{ file.key }}" target="_blank"><i class="fa fa-download"></i></a>
  </p>
</div>
{% endif %}
{% endmacro %}
